# 05-1. 빠른 CPU를 위한 설계 기법

- CPU를 설계하는 엔지니어는 어떻게 하면 CPU를 빠르게 동작할 수 있는지 고민할 것이다
- 앞으로 그 어떻게에 대한 내용이 나온다

## 클럭

- 클럭의 박자에 맞춰 컴퓨터 부품들은 움직인다
- CPU는 명령어 사이클에 따라 명령어를 실행한다
- 클럭의 속도에 맞춰서 CPU가 명령어 사이클을 돌리기 때문에, 클럭의 속도가 빠르면 빠를 수록 CPU는 더 빠르게 일할 것이다.
- 이런 클럭의 속도의 단위는 `Hz(헤르츠)` 이다.
- 1초에 클럭이 한번 반복되면 1Hz, 1초에 100번이면 100Hz이다

<aside>
💡 클럭의 속도를 시계와 같이 생각하면 속도가 일정해보인다.
그러나 클럭의 속도는 일정하지 않고, 기본 클럭 속도(base)와 최대 클럭 속도(max)가 정해져있고, 고성능을 유지하면 속도를 높힌다.
클럭의 최대 속도보다 더 높이 끌어올리는 것을 `오버클럭킹`이라고 한다.

</aside>

- 무작정 클럭의 속도만 높인다면 컴퓨터 발열 현상이 심하게 나타난다
- CPU 성능을 높이는 다른 방법을 살펴보자

## 코어와 멀티코어

### 코어의 정의

- 명령어를 실행하는 부품 = 하나의 코어
- 앞서 우리가 배웠던 CPU는 `APU + 제어장치 + 레지스터` 로 이루어져 있다 하였다
- 저렇게 한 세트로 이루어진 부품을 1코어라고 부른다
- 명령어 실행을 하는 코어가 많은 수록 명령어를 처리하는 일꾼이 많아서 더 빠른 일처리를 할 수 있다
- 그러나 일의 분배가 잘되지 않으면 그만큼 효율이 나지 않을수도 있고, 처리할 일은 적은데 오히려 일꾼이 많으면 효율적이라고 할 수는 없다
- 그래서 무조건적으로 코어가 많다고 하여 CPU 성능이 좋다고 할 수도 없다

## 스레드와 멀티스레드

### 스레드의 정의

- 실행 흐름의 단위
- `하드웨어적 스레드`
  - 하나의 코어가 동시에 처리하는 명령어 단위
  - 하지만 하나의 코어가 하나의 명령어만 실행할 수 있는건 아니다
  - 예를 들어, `2코어 4스레드` 는 코어는 2개, 스레드는 4개로 한 번에 4개의 명령어를 처리할 수 있다
  - 이런식으로 하나의 코어로 여러개의 명령어를 동시에 처리하는 CPU를 `멀티스레드 프로세서`, `멀티스레드 CPU`라고 한다
- `소프트웨어적 스레드`
  - 하나의 프로그램에서 독립적으로 실행되는 단위
  - 프로그램의 여러 부분이 동시에 실행될 수도 있다
    - 이 기능을 위한 코드를 각각의 스레드로 만들면 동시에 실행할 수 있다
  - 예를 들어 워드프로세서를 개발한다면
    - 입력받은 내용을 화면에 보여주기
    - 입력한 내용이 맞춤법에 맞는지 검사하기
    - 입력한 내용을 스스로 저장하기
  - 위의 기능 세개를 동시에 실행해야한다는 말이다
- 소프트웨어적 스레드 관점에서 생각하면 1코어 1스레드 CPU도 여러개의 명령어를 실행할 수 있다
- `멀티스레드 프로세서`
  - 하나의 코어로 여러 명령어를 동시에 처리하도록 만드려면 `레지스터`가 핵심이다
    - 프로그램 카운터, 스택 포이터, 데이터 버퍼 레지스터, 데이터 주소 레지스터 등
  - 이렇게 하나의 명령어를 처리하기 위한 레지스터 세트를 여러개 가지고 있으면 된다
- `논리 프로세서`
  - 2코어 4스레드 CPU가 네 개의 명령어를 처리하면 프로그램 입장에서는 한 번에 하나의 명령어를 처리하는 CPU가 4개가 있는 것 같다
  - 그래서 하드웨어 스레드를 논리 프로세서라고 부르기도 한다
