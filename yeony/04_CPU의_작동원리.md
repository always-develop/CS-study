# 04-1. ALU와 제어장치

## ALU : Arithmetic Logic Unit, 산수 논리 장치

- 직역한 것을 바탕으로 생각해보면 **계산**을 수행하는 장치이다.
- 계산을 하기 위해 필요한 것은?
  - `피연산자`
    - 레지스터에서 받는다
  - `제어신호`
    - 제어장치에서 받는다
- 계산 후, 내보낼 수 있는 것은?
  - 결과값
    - 다시 레지스터로 보낸다
  - 플래그
    - 결과값에 대한 부가적인 정보를 플래그 레지스터에게 보낸다
    - 결과값에 대한 부가적인 정보라함은?
      - 단순히 이진수를 통해서 양수인지 음수인지 판단하기 어렵기 때문에 이런 것들을 알려주기 위함. 결과값에 대한 특이사항.
    - 플래그 종류
      | 종류 | 의미 | 1이면 긍정
      0이면 부정 |
      | --- | --- | --- |
      | 부호 플래그 | 연산 결과의 양/음수 | |
      | 제로 플래그 | 0인지 아닌지 | |
      | 캐리 플래그 | 올림수나 빌림수의 발생 여부 | |
      | 오버플로우 플래그 | 오버플로우 발생 여부
      - 연산 결과를 담을 레지스터보다 큰 상황 | |
        | 인터럽트 플래그 | 인터럽트 가능 여부 | |
        | 슈퍼바이저 플래그 | 커널 모드인지, 사용자 모드인지 여부 | |

## 제어장치

- 명령어를 해석하여 제어 신호로 내보낸다
- 제어장치가 받는 것
  - 클럭, clock
    - 컴퓨터 내부의 시계, 타이머같은 존재
    - 시계가 똑딱똑딱 움직이는 박자에 맞춰서 부품들이 작동한다
  - 해석이 되지 않은 명령어
    - 명령어 레지스터에게 해석되지 않은 명령어를 받는다
  - 플래그 레지스터 속 플래그 값
    - 결과값에 대한 참고 사항을 받아야 정확한 해석이 가능하다
  - 제어 버스로 전달된 제어 신호
    - 외부에서 온 제어 신호를 받는다
- 제어장치가 보내는 것
  - CPU 내부와 외부로 제어 신호를 내보낸다
    - 외부로 보내는 것은 제어 버스를 통해 보내지

# 04-2. 레지스터

- CPU 내부 임시 저장 장치
- 레지스터에 오고가는 데이터를 알면 현재 CPU 내부에서 어떤 일이 일어나는지 알 수 있다

## 꼭 알아야하는 레지스터

- 많은 CPU들이 공통으로 포함하는 8가지의 레지스터가 있다
- 레지스터는 각 역할에 맞는 데이터를 저장한다

| 종류 | 역할 |
| ---- | ---- |

| 프로그램 카운터
(명령어 포인터) | 메모리에서 읽어 들일 명령어의 주소
프로그램의 순서를 관장하여 현재 읽어들어야 할 명령어 주소를 저장한다 |
| 명령어 레지스터 | 방금 메모리에서 읽은 명령어를 저장하는 곳 |
| 메모리 주소 레지스터 | 메모리가 읽어들이고자 하는 주소 값을 저장하는 곳
주소 버스로 내보낼 주소 값 |
| 메모리 버퍼 레지스터 | 메모리에 쓰고 싶은 값이나 메모리로부터 전달받은 값을 저장하는 곳
데이터 버스로 주고 받을 값 |

- 프로그램 카운터는 꾸준히 증가하여 프로그램을 차례대로 실행하는데 기여한다
  - 프로그램이 차례대로 실행되지 않을 수 있다 → 실행 흐름이 끊길 수 있다
    - 특정 메모리 주소로 실행 흐름을 이동하는 명령어가 실행되었을 때
    - 인터럽트가 발생했을 때

| 종류                                   | 역할                                                    |
| -------------------------------------- | ------------------------------------------------------- |
| 범용 레지스터                          | 메모리 주소 레지스터와 메모리 버퍼 레지스터를 합친 개념 |
| 현재는 대부분 범용 레지스터를 사용한다 |
| 플래그 레지스터                        | 연산 결과와 CPU의 부가적인 정보를 저장하는 곳           |

## 특정 레지스터를 이용한 주소 지정 방식 1 : 스택 주소 지정 방식

- 스택과 스택 포인터를 이용한 주소 지정 방식
  - 스택 포인터?
    - 스택 중 가장 위에 있는 스택을 가리키는 레지스터
    - 가장 먼저 꺼내어질 레지스터를 가리킨다
    - 어디까지 채워져 있는지 알 수 있다
- 스택은 메모리 내부에 있다
  - 메모리 내부 스택으로 사용하겠다는 공간이 따로 있다
- 스택 포인터는 레지스터에 있다
