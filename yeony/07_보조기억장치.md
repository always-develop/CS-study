# 07-1. 다양한 보조기억장치

## 하드 디스크

- **자기적인(magnatic) 방식**으로 데이터를 저장한다 ( = 자기디스크)
- 하드 디스크는 CD나 LP를 떠올리는 모양을 가지고 있다
  - 실제로 LP처럼 원판에 데이터를 저장하고, 회전시켜 뾰족한 리더기로 읽는다
- `플래터` : 원판처럼 생긴 부분
  - 자기적인 물질로 덮여 있고, N극과 S극을 저장한다
  - N극과 S극은 0과 1의 역할을 담당한다
- `스핀들` : 플래터를 회정시키는 구성 요소
  - 스핀들이 플래터를 돌리는 속도는 분단 회전수를 나타내는 RPM을 사용한다
  - 1분당 도는 회전수를 나타낸다
- `헤더` : 플래터를 대상으로 데이터를 읽고 쓰는 구성 요소
  - 뾰족한 리더기
  - `디스크 암` : 헤더를 원하는 위치로 이동시키는 부품
- 하드 디스크는 여러겹의 플래터로 이루어져있고 양면인 것이 특징이다
  - 플래터당 2개의 헤드로 양면의 데이터를 모두 이용한다
- 플래터는 `트랙` 과 `섹터` 단위로 데이터를 저장한다
  - 트랙은 운동장의 트랙과 같이 플래터에서 하나의 원이다
  - 섹터는 트랙을 피자조각처럼 나눈 한 부분이다
    - 하드디스크의 가장 작은 단위이다
    - 일반적으로 512바이트이고, 하드 디스크의 크기에 따라 다르다
- 실린더는 여러겹의 플래터의 같은 트랙들을 모은 논리적 단위이다
  - 실린더는 트랙으로 원기둥이 만들어진다고 생각하면 쉽다
- 연속된 정보는 하나의 실린더에 기록된다
  - 디스크 암이 움직이지 않고, 헤드로 양쪽의 플래터에 접근할 수 있기 때문이다
- 하드디스크가 데이터에 접근하는 시간은 탐색시간, 회전 지연, 전송 시간으로 나뉜다
  - `탐색 시간` : 접근하려는 데이터가 저장된 트랙까지 헤드를 이동시키는 시간
  - `회전 지연` : 헤드가 있는 곳으로 플래터를 회전시키는 시간
  - `전송 시간` : 하드 디스크와 컴퓨터 간 데이터를 전송하는 시간
- 생각보다 이 시간들은 꽤 오래걸린다
- 플래터를 빨리 돌려 RPM을 높이는 것도 중요하지만, 접근하려는 데이터를 헤드가 좀더 빨리 찾을 수 있게 위치시는 것도 중요하다

## 플래시 메모리

- 플래시 메모리 기반의 보조기억장치
  - USB, SD, SSD
- 박스처럼 생겼다
- 전기적 데이터를 읽고 쓸 수 있는 반도체 기반의 저장 장치이다
- 일상적으로 접하는 거의 모든 전자 제품 안에 플래시 메모리가 사용되고 있다
- `셀` : 플레시 메모리의 가장 작은 단위
  - 셀들이 모여 MB, GB, TB 용량을 갖는 저장 장치가 된다
- 하나의 셀에 몇 비트를 저장할 수 있을까?
  - SLC(Single Level Cell) : 1비트
  - MLC(Multiple Level Cell) : 2비트
  - TLC(Triple Level Cell) : 3비트
  - QLC(Quadra Level Cell) : 4비트
- 이것은 플래시 메모리의 수명, 속도, 가격에 영향을 준다
  - 플래시 메모리도 수명이 있다는 사실 ..

### SLC 타입

- 한 셀로 두 개의 정보를 표현한다
- 한 셀 안에 1 또는 0이 있어 비트의 빠른 입출력이 가능하다
  - 어짜피 하나만 있기 때문에 나오고 들어가기가 빠르다
- 수명도 다른 타입에 비해 길다..
- 단일 가구가 많아져야해서 용량 대비 가격이 높다…
  - 고성능의 빠른 저장 장치를 사용할 때 쓴다..

### MLC 타입

- 한 셀로 네 개의 정보를 표현한다
- SLC에 비해 속도와 수명은 좀 떨어진다
- 그래서 SLC에 비해 저렴하다..

### TLC 타입

- 한 셀로 여덟 개의 정보를 표현할 수 있다
- 대용량화하기 유리하지만 수명과 속도가 떨어지며 가격도 저렴하다

### 셀의 단위

- 셀이 모이면 `페이지`
- 페이지가 모이면 `블록`
- 블록이 모이면 `플레인`
- 플레인이 모이면 `다이`
- 읽기와 쓰기는 페이지 단위이다
  - 페이지의 상태는 세가지이다
    - `Free` : 저장된 데이터가 없어서 새로운 데이터를 맞이할 수 있는 상태
    - `Valid` : 이미 유효한 데이터를 저장한 상태
    - `Invalid` : 가비지 데이터를 저장한 상태
  - `Valid` 한 곳은 새 데이터를 저장할 수 없다
    - 이런 특징 때문에 SSD는 가비지 컬렉션 기능을 제공한다
    - `Invalid` 한 페이지가 있는 블록을 새로운 블록에 복사하고, (이때 Invalid한 페이지는 가져오지 않는다) Invalid값이 있는 블록은 삭제한다

# 07-2. RAID의 정의와 종류

## RAID의 정의

- 정보량이 어마어마하고,, 이것들을 한 곳에 다 때려박는게 말인가..? 여기엔 민감한 정보들도 있다궁..
- 이럴때 RAID 방법을 사용한다
- 하드 디스크와 SSD를 사용하는 기술이다
  - 데이터의 안정성과 높은 성능을 위해 여러개의 물리적 보조기억장치를 하나의 논리적 보조기억장치처럼 사용한다

## RAID의 종류

- RAID 0, 1, 2, 3, 4, 5, 6이 있고 파생된 RAID 10, 50이 있는데.. 대중적인 것들만 알아보자

### RAID 0

- 여러개의 보조기억장치에 데이터를 나누어 저장한다
- 1TB 하드 디스크 4개를 사용한다 했을 때.. 저장시 각 하드 디스크에 번갈아가며 저장한다..
- 줄무늬처럼 분산되어 저장되기 때문에 저장된 데이터를 `스트라입(stripe)`이라하고, 이런 분산 저장 방법을 `스트라이핑(striping)`이라고 한다
- 데이터가 분산 저장되면 저장된 데이터를 읽고 쓰는 속도가 빨라진다
  - 각 하드 디스크가 동시에 일을 할 수 있거든..
- 4TB 하나를 쓰는 것보다 1TB 4개를 쓰는게 성능이 좋은 이유다..
- 하지만 하나의 하드 디스크에 문제가 생기면 다른 모든 하드 디스크의 정보를 읽어오는데 어려움이 있을 수 있다

### RAID 1

- 복사본을 만드는 방식!
- 앞서 RAID 0처럼 1TB 하드디스크를 4개 사용하며 동일하게 스트라이핑 방식을 이용한다
- 그러나 실제 사용되는 2개의 하드 디스크와 백업 하드 디스크 2개로 나뉜다
  - 이래서 느리다
  - 백업용이 있으니 복구는 쉽다
  - 하지만 백업용이 있기 때문에 용량 제한이 있으면 많이 못쓴다

### RAID 4

- RAID 1처럼 완벽한 복사본을 만들긴 한다
- 차이점은 오류를 검출하고 복구하기 위한 정보를 저장한 장치를 두는 방식이다
- `패리티 비트` : 오류를 검출하고 복구하기 위한 정보를 말한다
- 패리티를 저장한 곳을 이용해서 다른 장치들의 오류를 검출하여 오류가 있으면 복구하는 방식으로 동작한다
- RAID 1보다 안전하다

### RAID 5

- RAID 4처럼 패리티가 하나의 하드 디스크에 모여 있으면 패리티를 저장한 하드 디스크는 너무 바쁠것이다
  - 병목 현상 발생..!!
- RAID 5는 패리티 정보를 각 하드디스크 한 공간씩 나눠서 저장한다

### RAID 6

- RAID 5와 동일하게 패리티를 나눠서 저장하지만 서로 다른 패리티를 두 개씩 저장한다
  - 그래서 RAID 5보다는 느리다
- 하지만 안전할 것이다.. 저장 속도를 희생하고 안전한 방법을 선택하고 싶다면 RAID 6를 선택하자!
