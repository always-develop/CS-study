# 04. ALU 와 제어장치

# [CS] 👽 혼자 공부하는 컴퓨터구조+운영체제

---

## 04. ALU 와 제어장치

### 04-1. ALU 와 제어장치

- 산술 논리 연산 장치(Arithmetic Logic Unit, ALU)는 이름 그대로 계산을 담당하는 CPU 의 부품이다
  - 계산을 하기 위해선… 피연산자와 수행할 연산이 필요하다
  - 1 + 2 라는 계산식이 존재할 때
  - 1, 2는 피연산자, + 는 연산
- ALU 는 레지스터를 통해 `피연산자` 를 받아들이며, 제어장치로부터 수행할 연산을 알려주는 `제어 신호` 를 받는다
- ALU 의 연산 결과는 문자가 될 수도 있고, 숫자가 될 수도 있고, 메모리 주소가 될 수 있다
  - 연산이 끝난 데이터는 메모리에 바로 저장되는 것이 아니라, 일단 레지스터에 저장된다
  - 만약 메모리에 바로 저장하게 된다면 CPU to 메모리의 접근 속도가 느리기 때문에, 우리가 사용하는 애플리케이션도 느려질 수 있다
  - 그리고 ALU 는 `플래그` 도 내보낸다!
- 플래그란.. ALU 의 연산 결과의 부가 정보라고 할 수 있다
  - 예를 들어, 양수/음수를 판단하기 위한 플래그라던가..
- ALU 가 내보내는 대표적인 플래그
  - 부호
    - 연산 결과가 음수인지, 양수인지 나타내기 위한 플래그
  - 제로
    - 연산 결과가 0인지 여부를 나타내기 위한 플래그
  - 캐리
    - 연산 결과, 올림수나 빌림수가 발생했는지 나타내기 위한 플래그
  - 오버플로우
    - 연산 결과 데이터가 레지스터의 크기보다 큰지를 나타내기 위한 플래그
  - 인터럽트
    - 인터럽트가 가능한지를 나타내기 위한 플래그
  - 슈퍼바이저
    - 커널 모드로 실행 중인지, 사용자 모드로 실행 중인지를 나타내기 위한 플래그
- `제어장치` 는 제어 신호를 내보낸다!
  - 제어 신호는 컴퓨터 부품들을 관리하고 작동시키기 위한 전기 신호라고 할 수 있다
  - 가장 정교하게 설계된 부품이란다
- 제어장치가 받는 정보
  - 클럭 신호
    - 클럭이란, 컴퓨터의 모든 부품을 일사불란하게 움직일 수 있게 하는 시간 단위라고 한다
    - 컴퓨터 부품들은 클럭이라는 박자에 맞춰 동작한다고 한다
      - 그렇다고 해서 박자마다 동작하는 것은 아니다
    - 간단하게 말해서 동작 주파수라고 한단다
      - 1초 동안 파장이 한 번 움직이는 시간…….
      - 이 시간동안 처리하는 데이터 양에 따라 CPU 속도가 달라진다고 한당
      - 오버 클럭 → CPU 의 동작 주파수를 올려 처리 속도를 높이는 것이었당
      - [참고 링크](https://library.gabia.com/contents/infrahosting/1227/)
  - 해석해야 할 명령어
    - CPU 가 해석할 명령어는 `명령어 레지스터` 라는 특별한 레지스터에 저장된당
    - 제어장치는 이 레지스터로부터 해석할 명령어를 받아 해석하고 제어 신호를 발생시킨다
  - 플래그 레지스터 속의 플래그 값
  - 제어 버스로 전달된 제어 신호
    - CPU 외부에 전달하는 제어 신호와 내부로 전달하는 제어 신호가 있다!
    - CPU 외부에 전달하는 신호는 제어 버스를 통해 전달된다

### 04-2. 레지스터

- `프로그램 카운터(Program Counter,  PC)`
  - 명령어 포인터(Instruction Pointer) 라고 한다
  - 메모리에서 읽어들일 명령어의 주소를 저장하는 레지스터
  - 명령어가 처리될 때 마다 프로그램 카운터가 증가하며, 계속해서 다음 명령어를 읽어들일 준비를 한다고 한다
    - 명령어 중 특정 메모리 주소로 실행 흐름을 이동하는 명령어를 만나게 된다면 프로그램 카운터의 주소가 완전히 다른 주소로 변경될 수 있다
- `명령어 레지스터(Instruction Register, IR)`
  - 메모리에서 읽어들인 명령어를 저장하는 레지스터
  - 제어 장치는 이 레지스터의 명령어를 받아 해석한 뒤 제어 신호를 내보낸다!
- `메모리 주소 레지스터(Memory Address Register, MAR)`
  - CPU 가 데이터를 읽거나 쓰려는 메모리 주소를 저장하는 레지스터
  - 주소 버스에서 오가는 데이터가 이 레지스터를 거친다고 한다
- `메모리 버퍼 레지스터(Memory Buffer Register, MBR)`
  - 혹은 `메모리 데이터 레지스터(Memory Data Register)` 라고도 한다
  - 메모리와 주고받을 값(데이터와 명령어)을 저장하는 레지스터
  - 데이터 버스로 오가는 데이터가 이 레지스터를 거친다
- 플래그 레지스터
- 범용 레지스터
  - 말 그대로 범용적으로 쓰이는 레지스터라고 한다
- 스택 포인터
  - `스택 주소 지정 방식` 이라는 주소 지정 방식에 사용되는 레지스터라고 한다!
    - `스택 주소 지정 방식` 이란, 스택과 스택 포인터를 이용한 주소 지정 방식이라고 한다
    - 즉, 마지막에 적재한 데이터의 위치를 저장하는 레지스터라고 한다
    - 그냥 메모리 내에 스택 형식의 데이터를 쌓을 수 있는 공간이 있고, 이를 `스택 영역` 이라고 부른다고 한다
- 베이스 레지스터
  - 주소 지정에 사용될 수 있는 특별한 레지스터라고 한다
- `변위 주소 지정 방식` 이란
  - 오퍼랜드의 필드 값(변위)과 특정 레지스터의 값을 더하여 유효 주소를 얻는 주소 지정 방식이라고 한다 😱
  - 그래서 변위 주소 지정 방식을 사용하는 명령어는 연산 코드/레지스터/오퍼랜드 의 세 가지 영역으로 구분되어 있다고 한다
  - 이 때, 오퍼랜드 필드의 주소와 어떤 레지스터를 더하는지에 따라서 `상대 주소 지정 방식` 과 `베이스 레지스터 주소 지정 방식` 으로 나뉜다고 한당
    - `상대 주소 지정 방식` 이란..
      - 오퍼랜드 + 프로그램 카운터 값을 더하여 유효 주소를 얻는 방식
      - 예를 들어 프로그램 카운터가 5번지를 가르키고 있고, 오퍼랜드에 -2 가 들어있다면…. 3번지로 접근한다
      - 이는 마치 `if` 문처럼 분기에 따라 코드를 실행해야 할 때 사용한다
    - `베이스 레지스터 주소 지정 방식` 이란
      - 오퍼랜드 + 베이스 레지스터 값을 더하여 유효 주소를 얻는 방식이다
      - 베이스 레지스터란, 기준 주소라는 것을 뜻하는데… 명령이 시작되는 시작 번지를 기억하고 있는 레지스터라고 한다
