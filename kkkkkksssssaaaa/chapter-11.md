# 11장. CPU 스케줄링

# [CS] 👽 혼자 공부하는 컴퓨터구조+운영체제

---

## 11장. CPU 스케줄링

### 11-1. CPU 스케줄링 개요

- 운영체제가 프로세스에게 CPU 를 할당해주는 것을 `CPU 스케줄링` 이라고 한다
  - 그냥 선착순으로 주면 되지….. 라고 생각하겠지만, 프로세스마다 `우선순위` 가 다르기 때문에, 운영체제는 우선순위에 맞게 CPU 자원을 할당해준다
  - 보통 우선순위가 높은 프로세스는 빨리 처리되어야하는 프로세스를 의미하며, 대표적으로는 입출력 작업이 많은 프로세스가 이에 해당한다고 한다
- 비디오 재생이나 디스크 백업 작업처럼 입출력 작업이 많은 프로세스를 `입출력 집중 프로세스(I/O Bound Process)` 라고 하며, 연산, 컴파일, 그래픽 처리 등 CPU 의 작업이 많은 프로세스를 `CPU 집중 프로세스(CPU Bound Process)` 라고 한다
  - 보통 입출력 집중 프로세스는 대기 상태에 더 많이 머무른다
    - 입출력 대기 작업을 `입출력 버스트(I/O Burst)` 라고 한다
    - 어차피 입출력 작업을 실행한 이후 대기 상태에 더 많이 머무르기 때문에 입출력 작업을 먼저 수행하는게 더 효율적이라고 한다
  - 반대로 CPU 집중 프로세스는 실행 상태에 더 많이 머무른다
    - CPU 를 이용하는 작업을 `CPU 버스트(CPU Burst)` 라고 한다
- 운영체제는 PCB 에 `우선순위(Priority)` 를 명시한다고 한다
  - 하지만 우선순위만 명시한다고 해서 운영체제가 스케줄링을 효율적으로 할 수 있는건 아니다
  - 큐(Queue) 형태의 자료구조에 프로세스를 줄세워서 관리한다
  - 이 큐를 `스케줄링 큐(Scheduling Queue)` 라고 한다
  - 단, 일반적인 자료구조 큐는 선입선출 형태의 자료구조이지만 스케줄링 큐는 반드시 선입선출일 필요는 없다고 한다 ㄴㅇㄱ
- 프로세스가 수행하려는 동작에 따라 큐의 종류가 달라지는데
  - `준비 큐(Ready Queue)` 는 CPU 를 이용하고 싶은 프로세스가 적재되는 자료구조이며
  - `대기 큐(Waiting Queue)` 는 입출력장치를 이용하고 싶은 프로세스가 적재되는 자료구조라고 한다
    - 대기 큐는 장치마다 존재하는듯 하다
- `선점형 스케줄링` 이란 현재 CPU 를 사용 중인 프로세스가 존재할 때 우선순위가 높은 프로세스가 자원을 요청한다면, 진행 중인 프로세스의 자원을 해제하여 우선순위가 더 높은 프로세스에게 할당해주는 스케줄링 기법이다
  - 즉, 더 급한 프로세스가 있다면 언제든지 CPU 를 할당받을 수 있다는 뜻이기도 하다
  - 이로 인한 문맥 교환이 자주 발생하기 때문에 오버헤드가 발생할 수 있다
- 반대로 `비선점형 스케줄링` 이란 현재 CPU 를 사용 중인 프로세스의 작업이 끝날 때 까지 다른 프로세스가 CPU 를 뺏어가지 못하는 스케줄링 기법을 말한다
  - 문맥 교환에서 발생하는 오버헤드는 적지만, 급한 프로세스가 있을 때 현재 실행 중인 프로세스가 대기 상태로 변경될 때 까지 대기해야 한다는 단점이 있다

### 11-2. CPU 스케줄링 알고리즘

- `선입 선처리 스케줄링(First Come First Served Scheduling, FCFS)`
  - 선입선출~
  - 비선점형 스케줄링 방식이라고 한다
  - 비선점형이기 때문에 작업 시간이 오래 걸리지 않는 프로세스가 큐에 뒷 순서에 있다면 한없이 기다려야만 한다
  - 이런 현상을 `호위 효과(Convoy effect)` 라고 한다
- `최단 작업 우선 스케줄링(Shortest Job First Scheduling, SJF)`
  - 말 그대로 작업 시간이 짧은 프로세스가 먼저 CPU 를 할당받는다
  - 기본적으로는 비선점형 스케줄링이지만 스케줄링으로도 구현될 수 있다
- `라운드 로빈 스케줄링(Round Robin Scheduling, RR)`
  - FCFS 에 `타임 슬라이스` 라는 개념이 더해진 스케줄링 방식이다
    - 타임 슬라이스는 각 프로세스가 CPU 를 사용할 수 있는 정해진 시간을 의미한다
    - 즉, 정해진 시간만큼만 CPU 를 사용할 수 있는 선입 선처리 스케줄링이다
- `최소 잔여 시간 우선 스케줄링(Shortest Remaining Time Scheduling)`
  - SJF 와 RR 을 합친 스케줄링 방식이다
  - 즉…… 타임 슬라이스만큼 CPU 를 사용하지만, 이 다음 프로세스는 남은 작업 시간이 가장 적은 프로세스가 수행하는 방식이다
- `우선순위 스케줄링(Priority Scheduling)`
  - 프로세스에게 부여된 우선순위에 따라 가장 높은 우선순위를 가진 프로세스부터 실행하는 스케줄링 방식이다
  - 다만, 우선순위가 낮은 프로세스는 영원히 실행되지 않을 수 있다
    - 이를 `기아 현상(Starvation)` 이라고 한다
  - 기아 현상을 방지하기 위한 `에이징(Aging)` 이라는 방법도 있는데, 오랫동안 대기한 프로세스의 우선순위를 점차 높이는 방식이라고 한다
- `다단계 큐 스케줄링(Multi Level Queue Scheduling, MLQ)`
  - 우선순위 스케줄링이 발전하여, 우선순위별로 준비 큐를 여러 개 사용하는 스케줄링 방식이라고 한다
  - 큐마다 다른 스케줄링 방식을 취할 수도 있다고 한다
    - 개사기인듯 하다
  - 다만, 이미 줄 서 있는 프로세스가 다른 큐로 이동할 수는 없기 때문에 똑같이 기아 현상이 발생할 수 있다
- `다단계 피드백 큐 스케줄링(Multi Level Feedback Queue Scheduling, MLFQ)`
  - 다단계 큐 스케줄링이 또 발전한 형태이다
    - 기아 현상을 방지한다고 한다
  - 무려, 프로세스가 다른 큐로 이동할 수 있다
  - 너무나 복잡하지만 가장 일반적인 CPU 스케줄링 알고리즘이라고 한다
