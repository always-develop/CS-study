# 07. 보조기억장치

# [CS] 👽 혼자 공부하는 컴퓨터구조+운영체제

---

## 07. 보조기억장치

### 07-1. 다양한 보조기억장치

- 하드 디스크란??
  - 자기 디스크(Magnetic disk) 이다
  - CD 나 LP 와 비슷하게 동작한다
  - 원판에 데이터를 저장하고 회전시켜 리더기로 데이터를 읽는다….!
  - 원판을 `플래터(Platter)`, 플래터를 회전시키는 구성 요소를 `스핀들(Spindle)` 이라고 하며 플래터의 분당 회전 수를 `RPM(Revolution Per Minute)` 이라고 한다
  - 플래터의 데이터를 읽는, 마치 바늘처럼 생긴 부품을 `헤드(Head)` 라고 한다
    - 헤드는 헤드를 원하는 위치로 이동시키는 `디스크 암(Disk arm)` 에 부착되어 있다
  - 하드디스크는 CD 나 LP 에 비해 훨씬 많은 데이터를 저장해야 하기 때문에 여러 겹의 플래터로 이루어져 있다고 한다
- 플래터에 데이터가 저장되는 방법
  - `트랙(Track)` 과 `섹터(Sector)` 라는 단위로 데이터를 저장한다
  - 플래터를 여러 동심원으로 나누었을 때 그 중 하나의 원을 트랙이라고 하고, 여러 조각으로 나뉘어진 트랙의 한 조각을 섹터라고 부른다
  - 섹터는 하드 디스크의 가장 작은 전송 단위이며, 일반적으로는 512 바이트 정도의 크기를 가지고 있지만 하드디스크의 크기에 따라 차이가 있다
- 여러 겹으로 겹쳐진 플래터가 있을 때 같은 트랙이 위치한 곳을 모아 연결한 논리적 단위를 `실린더(Cylinder)` 라고 부른다
  - 연속된 정보는 한 실린더에 기록된다
- 하드디스크가 저장된 데이터에 접근하는 시간의 종류
  - 탐색 시간
    - 접근하려는 데이터가 저장된 트랙까지 헤드를 이동시키는 시간
  - 회전 지연
    - 헤드가 있는 곳으로 플래터를 회전시키는 시간
  - 전송 시간
    - 하드디스크와 컴퓨터간 데이터를 전송하는 시간
  - 위 시간들은 별거 아닌 것 같지만 사실 어마어마하게 느리다…!!!!!!!!
- RPM 을 높이는 것도 중요하지만, 참조 지역성도 매우 중요하다
  - 즉, 접근하려는 데이터가 플래터 혹은 헤드를 조금만 옮겨도 접근할 수 있는 위치에 존재하는 것도 중요하다!
- 플래시 메모리란..?
  - USB, SD 카드, SSD 같은걸 뜻한다고 한다
  - 반도체 기반의 저장 장치이다
  - `셀(Cell)` 이라는 단위가 있는데… 이는 하드디스크의 섹터처럼, 플래시 메모리에서 데이터를 저장하는 가장 작은 단위를 뜻한다
  - 한 셀에 저장할 수 있는 비트 수에 따라 SLC(Single Level Cell), MLC(Multiple Level Cell), TLC(Triple Level Cell) 로 나뉜다
  - SLC 가 속도도 제일 빠르고 용량도 적고 비싸고 수명도 길다고 한다..!!!!
- 셀이 모여 만들어진 단위를 `페이지(Page)`, 페이지가 모여 만들어진 단위를 `블록(Block)`, 블록이 모여 만들어진 단위인 `플레인(Plane)`, 플레인이 모인 단위를 `다이(Die)` 라고 한다
- 플래시 메모리에서 읽기와 쓰기는 페이지 단위로 이뤄지지만, 삭제는 블록 단위로 이루어진다
  - 읽기/쓰기 단위와 삭제 단위가 다른 것은 플래시 메모리의 큰 특징이다
  - 이 때문에 페이지는 세 개의 상태를 가진다
    - `Free` 상태는 어떠한 데이터도 가지고 있지 않은 상태이며
    - `Valid` 상태는 유요한 데이터를 저장하고 있는 상태를 뜻하고
    - `Invalid` 상태는 쓰레기값이라 불리우는 유효하지 않은 데이터를 저장하고 있는 상태를 말한다
  - 플래시 메모리는 하드디스크와 달리 덮어쓰기가 불가능하며, Valid 상태인 페이지에는 새 데이터를 저장할 수 없다고 한다
- 플래시 메모리도 쓰레기 값들이 쌓이기 때문에… 가비지 컬렉션 기능을 제공한다고 한다

### 07-2. RAID 의 정의와 종류

- `RAID(Redundant Array of Independent Disks)` 란 데이터의 안정성 혹은 높은 성능을 위해 여러 개의 물리적 보조기억장치를 마치 하나의 논리적 보조기억장치처럼 사용하는 기술을 의미한다
- RAID 구성 방법에 따라 RAID0, 1, 4, 5…. 등으로 나뉜다
- RAID 0
  - 여러 개의 보조기억장치에 데이터를 단순히 나누어 저장하는 구성 방식이다
  - 1TB 의 하드디스크 네 개로 RAID 0 을 구성하여 4TB 의 데이터를 저장한다면…
  - 4TB 의 데이터는 네 개로 나뉘어져 1TB 하드디스크 네 개에 각각 저장된다
  - 분산되어 저장된 데이터를 `스트라입(Stripe)` 이라고 하고, 분산하여 저장하는 것을 `스트라이핑(Striping)` 이라고 한다
  - 한 개의 저장장치에 모든 데이터를 저장하기 보다는, RAID 0 으로 구성된 저장장치에 데이터를 저장하는게 훨씬 빠르지만, 한 개의 저장장치에 문제가 있을 경우 데이터를 읽는 데 문제가 발생할 수 있다..!
- 그래서 등장한게 RAID 1 이다
  - RAID 1은 복사본을 만들어 저장한다
  - 미러링이라고도 불리운다..
  - 1TB 하드디스크 네 개로 RAID 1을 구성하면…. 2TB 짜리의 원본 데이터를 저장하는 저장장치 하나, 원본의 복사본을 저장하는 저장장치 하나가 구성된다
  - 용량은 적어지지만 복사본을 가지고 있을 수 있다는 장점이 있다
- RAID 4란
  - RAID 1처럼 복사본을 만드는 대신, 오류를 검출하고 복구하기 위한 정보를 저장하는 장치를 구성하는 방식이다
  - ‘오류를 검출하고 복구하기 위한 정보’ 는 `패리티 비트(Parity bit)` 라고 한다
  - 1TB 하드디스크 네 개로 RAID 4를 구성하면 3TB 의 저장장치와 패리티비트를 저장하는 1TB 짜리 저장장치 하나로 구성된다
  - 다만, 새 데이터를 저장할 때 패리티 비트 디스크에도 데이터를 쓰게 되므로, 이 디스크에 병목 현상이 발생할 수 있다
- 그래서~~ 등장한게 RAID 5이다
  - 패리티 정보를 레이드를 구성하는 디스크에 분산하여 저장하는 방식이라고 한다
- RAID 6이란
  - 기본 구성은 RAID 5와 같지만, 서로 다른 두 개의 패리티를 두는 방식이라고 한다
    - 즉, 오류를 검출하고 복구할 수 있는 수단이 두 개나 생긴 것이다
  - 이 말인 즉슨 새 데이터를 저장할 때 패리티 비트를 두 번이나 저장해야하기 때문에 속도가 RAID 5 대비 느리다는 뜻…
  - 하지만 속도를 희생하고 데이터를 더 안전하게 저장할 수 있는 방법이다
