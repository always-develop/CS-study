# 14장. 가상 메모리

# [CS] 👽 혼자 공부하는 컴퓨터구조+운영체제

---

## 14장. 가상 메모리

### 14-1. 연속 메모리 할당

- 메모리 내에 프로세스들이 연속적으로 배치될 수 있도록 메모리 공간을 할당하는 것을 `연속 메모리 할당` 이라고 한다
- `스와핑(Swapping)` 이란
  - 메모리에 적재된 프로세스 중에서는 당장 실행하지 않는 프로세스도 존재한다
  - 이런 프로세스들이 메모리를 점유하고 있는 것은 낭비이기 때문에, 일부 데이터들을 보조기억장치로 옮긴다
    - 이 때 메모리에서 옮겨진 데이터들이 저장되는 보조기억장치의 영역을 `스왑 영역(Swap space)` 이라고 한다
    - 스왑 영역으로 옮겨지는 것을 `스왑 아웃(Swap-Out)`, 다시 메인 메모리로 옮겨가는 것을 `스왑 인(Swap-In)` 이라고 한다
  - 이렇게 생긴 메모리 공간에 다른 프로세스들을 적재할 수 있게 된다
  - 이러한 메모리 관리 방식을 스와핑이라고 한다
- 스와핑 덕분에 RAM 크기보다 더 큰 프로그램을 실행할 수 있게 된다!
- 프로세스를 메모리에 배치하는 할당 방식은 크게 세 가지 방식이 존재한다
  - `최초 적합(First fit)`
    - 운영체제가 메모리 내 빈 공간을 찾다가 프로세스를 배치할 수 있는 공간을 발견하면 바로 배치하는 방식
    - 메모리 탐색을 최소화할 수 있다는 장점이 있어, 빠른 프로세스 할당이 가능하다
  - `최적 적합(Best fit)`
    - 운영체제가 메모리의 모든 공간을 탐색하여 가장 최적의 장소에 프로세스를 배치하는 방식
    - 다소 시간이 소요될 수 있겠다
  - `최악 적합(Worst fit)`
    - 최적 적합과 같이 모든 공간을 탐색 후 프로세스가 적재될 수 있는 공간 중 가장 큰 공간에 프로세스를 배치하는 방식이다
- 연속 메모리 할당은 메모리를 효율적으로 사용하는 방법은 아니라고 한다
  - `외부 단편화(External fragmentation)` 이라는 문제를 내포하고 있다
  - 프로세스를 할당할 수 없을 만큼의 메모리 공간이 생겨나, 메모리 공간이 낭비되는 현상을 뜻한다
  - 스와핑에도 외부 단편화는 발생한다
- 외부 단편화를 해결하기 위한 대표적인 방안으로는 메모리를 `압축(Compaction)` 하는 방법이 있다
  - 메모리 조각 모음이다
  - 흩어져있는 프로세스들을 한데 모아 연속적인 형태로 재배치하는 것이다
  - 다만, 이 과정에서 시스템은 하던 일을 모두 중단해야하고 메모리의 내용들을 그대로 다른 공간으로 옮기는 비용이 많이 들기 때문에, 최적의 압축 방법을 찾기 어렵다….
